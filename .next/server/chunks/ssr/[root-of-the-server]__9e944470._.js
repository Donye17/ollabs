module.exports=[72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},9270,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.AppRouterContext},38783,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactServerDOMTurbopackClient},36313,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.HooksClientContext},18341,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored.contexts.ServerInsertedHtml},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},10204,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(72352),e=a.i(96221),f=a.i(32116),g=a.i(63588);let h=(0,a.i(70106).default)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]]);var i=a.i(92134);let j=({frameId:a})=>{let{data:d}=i.authClient.useSession(),[e,f]=(0,c.useState)(0),[g,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{try{let b=await fetch(`/api/frames/likes?frameId=${a}&userId=${d?.user?.id||""}`),c=await b.json();f(c.count),d?.user?.id&&j(c.userLiked)}catch(a){console.error("Error fetching likes:",a)}})()},[a,d?.user?.id]);let m=async b=>{if(b.stopPropagation(),d?.user?.id&&!k){l(!0),j(!g),f(a=>g?a-1:a+1);try{await fetch("/api/frames/likes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({frameId:a,userId:d.user.id})})}catch(a){j(g),f(e)}finally{l(!1)}}};return(0,b.jsxs)("button",{onClick:m,disabled:!d||k,className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full transition-all ${g?"bg-red-500/10 text-red-500 hover:bg-red-500/20":"bg-slate-800 text-slate-400 hover:text-white hover:bg-slate-700"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[(0,b.jsx)(h,{size:16,fill:g?"currentColor":"none",className:g?"scale-110":""}),(0,b.jsx)("span",{className:"text-sm font-medium",children:e})]})};var k=a.i(92759);let l=({frameId:a})=>{let{data:d}=i.authClient.useSession(),[e,g]=(0,c.useState)([]),[h,j]=(0,c.useState)(""),[l,m]=(0,c.useState)(!1);(0,c.useEffect)(()=>{(async()=>{try{let b=await fetch(`/api/frames/comments?frameId=${a}`),c=await b.json();g(c)}catch(a){console.error("Error fetching comments:",a)}})()},[a]);let n=async b=>{if(b.preventDefault(),h.trim()&&d?.user?.id&&!l){m(!0);try{let b=await fetch("/api/frames/comments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({frameId:a,userId:d.user.id,content:h,userName:d.user.name,userImage:d.user.image})}),c=await b.json();g(a=>[...a,c]),j("")}catch(a){console.error("Error posting comment:",a)}finally{m(!1)}}};return(0,b.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,b.jsxs)("h4",{className:"text-sm font-bold text-slate-300",children:["Comments (",e.length,")"]}),(0,b.jsxs)("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2 custom-scrollbar",children:[e.map(a=>(0,b.jsxs)("div",{className:"flex gap-3 text-sm",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full bg-slate-800 flex-shrink-0 overflow-hidden",children:a.user_image?(0,b.jsx)("img",{src:a.user_image,alt:a.user_name,className:"w-full h-full object-cover"}):(0,b.jsx)(f.UserCircle2,{className:"w-full h-full text-slate-500 p-1"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,b.jsx)("span",{className:"font-semibold text-white",children:a.user_name||"Anonymous"}),(0,b.jsx)("span",{className:"text-xs text-slate-500",children:new Date(a.created_at).toLocaleDateString()})]}),(0,b.jsx)("p",{className:"text-slate-300 mt-0.5",children:a.content})]})]},a.id)),0===e.length&&(0,b.jsx)("p",{className:"text-slate-500 text-sm italic",children:"No comments yet."})]}),d?(0,b.jsxs)("form",{onSubmit:n,className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:h,onChange:a=>j(a.target.value),placeholder:"Write a comment...",className:"flex-1 bg-slate-800 border-slate-700 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-1 focus:ring-blue-500"}),(0,b.jsx)("button",{type:"submit",disabled:!h.trim()||l,className:"bg-blue-600 hover:bg-blue-500 text-white p-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:(0,b.jsx)(k.Send,{size:16})})]}):(0,b.jsx)("p",{className:"text-xs text-slate-500 text-center py-2 bg-slate-800/30 rounded-lg",children:"Sign in to comment"})]})},m=({onSelectFrame:a})=>{let[d,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0);return((0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("/api/frames?limit=20");if(!a.ok)throw Error("Failed to fetch frames");let b=(await a.json()).map(a=>({...a,config:"string"==typeof a.config?JSON.parse(a.config):a.config}));f(b)}catch(a){console.error("Failed to fetch gallery",a)}finally{h(!1)}})()},[]),g)?(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsx)(e.Loader2,{className:"animate-spin text-blue-500",size:32})}):(0,b.jsxs)("div",{className:"space-y-8 animate-in fade-in duration-500",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"Community Gallery"}),(0,b.jsx)("p",{className:"text-slate-400",children:"Discover designs from other creators"})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(c=>(0,b.jsx)(n,{frame:c,onSelect:()=>a(c.config)},c.id))}),0===d.length&&(0,b.jsxs)("div",{className:"text-center py-20 bg-slate-900/30 rounded-3xl border border-slate-800 border-dashed",children:[(0,b.jsx)("div",{className:"w-16 h-16 bg-slate-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(e.Loader2,{className:"text-slate-600",size:32})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"No frames yet"}),(0,b.jsx)("p",{className:"text-slate-400 mb-6 max-w-sm mx-auto",children:"Be the first to publish a verified design to the community gallery."}),(0,b.jsx)("a",{href:"/",className:"inline-flex items-center gap-2 bg-blue-600 hover:bg-blue-500 text-white font-semibold py-2.5 px-6 rounded-full transition-all",children:"Create Masterpiece"})]})]})},n=({frame:a,onSelect:e})=>{let h=c.default.useRef(null),[i,k]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{let b=h.current;if(!b)return;let c=b.getContext("2d");if(!c)return;c.clearRect(0,0,b.width,b.height);let e=d.FrameRendererFactory.getRenderer(a.config.type),f={ctx:c,width:b.width,height:b.height,centerX:b.width/2,centerY:b.height/2,imageObject:null,frame:a.config,radius:b.width/2-20};e.drawFrame(f)},[a.config]),(0,b.jsxs)("div",{className:"bg-slate-900 rounded-xl border border-slate-800 overflow-hidden hover:border-blue-500/50 transition-all hover:shadow-xl hover:shadow-blue-500/10 group flex flex-col",children:[(0,b.jsxs)("div",{className:"aspect-square bg-slate-950 relative flex items-center justify-center p-4",children:[(0,b.jsx)("canvas",{ref:h,width:300,height:300,className:"w-full h-full object-contain"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center backdrop-blur-[2px]",children:(0,b.jsx)("button",{onClick:e,className:"bg-white text-black font-bold py-2 px-6 rounded-full transform translate-y-4 group-hover:translate-y-0 transition-all duration-300",children:"Use this Frame"})})]}),(0,b.jsxs)("div",{className:"p-4 bg-slate-900 flex-1",children:[(0,b.jsx)("div",{className:"flex justify-between items-start mb-3",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-bold text-white truncate",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1 text-sm text-slate-400",children:[(0,b.jsx)(f.UserCircle2,{size:16}),(0,b.jsx)("span",{children:a.creator_name})]})]})}),(0,b.jsx)("p",{className:"text-xs text-slate-500 mb-4 line-clamp-2",children:a.description}),(0,b.jsxs)("div",{className:"flex items-center justify-between border-t border-slate-800 pt-3 mt-auto",children:[(0,b.jsx)(j,{frameId:a.id.toString()}),(0,b.jsxs)("button",{onClick:()=>k(!i),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full transition-colors ${i?"bg-blue-500/20 text-blue-400":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:[(0,b.jsx)(g.MessageSquare,{size:16}),(0,b.jsx)("span",{className:"text-sm font-medium",children:"Comments"})]})]}),i&&(0,b.jsx)("div",{className:"mt-4 border-t border-slate-800 pt-4 animate-in slide-in-from-top-2 duration-300",children:(0,b.jsx)(l,{frameId:a.id.toString()})})]})]})};var o=a.i(94948),p=a.i(50944);a.s(["GalleryPageClient",0,()=>{let a=(0,p.useRouter)();return(0,b.jsxs)("div",{className:"min-h-screen bg-slate-900 text-slate-50 font-sans",children:[(0,b.jsx)(o.NavBar,{}),(0,b.jsx)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,b.jsx)(m,{onSelectFrame:b=>{localStorage.setItem("temp_frame",JSON.stringify(b)),a.push("/")}})}),(0,b.jsx)("footer",{className:"py-8 text-center text-slate-600 text-sm",children:(0,b.jsxs)("p",{children:["Â© ",new Date().getFullYear()," Ollabs. Community Gallery."]})})]})}],10204)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__9e944470._.js.map